{% extends "base.html" %} {% block title %}My Bookings | Nexlot{% endblock %} {%
block content %}
<div class="container py-5">
  <h2 class="mb-4 text-center" style="font-family: 'Outfit', sans-serif">
    My Bookings
  </h2>

  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %} {% for category, message in messages %}
  <div class="alert alert-{{ category }} mt-3 text-center">{{ message }}</div>
  {% endfor %} {% endif %} {% endwith %} {% if bookings %}
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead class="table-dark text-center">
        <tr>
          <th>Reservation ID</th>
          <th>Spot ID</th>
          <th>Lot ID</th>
          <th>In Time</th>
          <th>Out Time</th>
          <th>Status</th>
          <th>Release</th>
        </tr>
      </thead>
      <tbody class="text-center">
        {% for b in bookings %}
        <tr>
          <td>{{ b.id }}</td>
          <td>{{ b.spot_id }}</td>
          <td>{{ b.spot.lot_id }}</td>
          <td>{{ b.in_time.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>
            {% if b.out_time %} {{ b.out_time.strftime('%Y-%m-%d %H:%M') }} {%
            else %} - {% endif %}
          </td>
          <td>
            {% if b.out_time %}
            <span class="badge bg-success">Released</span>
            {% else %}
            <span class="badge bg-warning text-dark">Active</span>
            {% endif %}
          </td>
          <td>
            {% if not b.out_time %}
            <a
              href="{{ url_for('views.release_spot', reservation_id=b.id) }}"
              class="btn btn-danger btn-sm"
              >Release</a
            >
            {% else %} - {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p class="text-center text-muted mt-4">No bookings found.</p>
  {% endif %}
</div>
{% endblock %}
